databaseChangeLog:
  - changeSet:
      id: add-email-to-app-user-004
      author: you
      changes:
        # 1) Sütunu ekle (önce nullable)
        - addColumn:
            tableName: app_user
            columns:
              - column:
                  name: email
                  type: VARCHAR(150)

        # 2) Var olan admin kullanıcısına bir email ver
        - update:
            tableName: app_user
            columns:
              - column:
                  name: email
                  value: admin@example.com
            where: "username = 'admin'"

        # 3) NOT NULL yap
        - addNotNullConstraint:
            tableName: app_user
            columnName: email
            columnDataType: VARCHAR(150)

        # 4) UNIQUE constraint ekle
        - addUniqueConstraint:
            tableName: app_user
            columnNames: email
            constraintName: uk_app_user_email
